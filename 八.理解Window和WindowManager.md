#《Android开发艺术探索》读书笔记
#第八章 理解Window和WindowManager
	
一般少用到Window，但是如果想在桌面上显示一个类似悬浮窗的东西就要接触到。Window是一个抽象类，具体实现类是PhoneWindow，创建一个Window通过WindowManager就可以实现，WindowManager是外界访问Window的入口，Window的具体实现位于WindowManagerService中，WindowManager和WindowManagerService的交互是一个IPC过程。Android中的所有视图都是通过Windows来呈现的，不管是Activity，Toast还是Dialog，他们的视图实际上都是附加在Window上的，所有Window实际上是View的直接管理者。从事件分发也知道，单击事件由Window传递给DecorView，再由DecorView传给我们的View，就连Activity的设置视图的方法setContentView在底层也是通过Window来完成的。<br>
##8.1 Window和WindowManager
	
如何使用WindowManager添加一个Window？WindowManager的addView方法<br>
	WindowManager的flags和type参数：flags表示Window的属性，通过这个选项可以控制Window的显示特性，常用的有：<br>
	(1)FLAG_NOT_FOCUSABLE<br>
	表示Window不需要获取焦点，也不需要接收各种输入事件，此标记同时会启用FLAG_NOT_TOUCH_MODAL，最终事件会直接传递给下层的具有焦点的Window<br>
	(2)FLAG_NOT_TOUCH_MODAL<br>
	在此模式下，系统会将当前Window区域以外的单击事件传递给底层的Window，当前Window区域以内的单击事件要自己处理，这个标记很重要，一般来说都要开启此标记，否则其他Window将无法收到单击事件。<br>
	(3)FLAG_SHOW_WHEN_LOCKED<br>
	开启此模式可以让Window显示在锁屏的界面上。<br>
	type参数表示Window的类型，Window有3种类型，分别是Window，子Window和系统Window，应用类Window对应着一个Activity，子Window不能单独存在，它需要附属在特定的父Window中，比如常见的Dialog就是子Window，系统Window是需要声明权限再能创建的Window，比如Toast和系统状态栏这些都是系统Window。<br>
	Window是分层的，每个Window都有对应的z-ordered，层级大的会覆盖在层级小的上面，这个和html中的z-index的概念是完全一致的，三类Window中，应用Window的层级范围是1-99,子Window的层级范围是1000-1999，系统Window的层级是2000-2999，这些层级范围对应着WindowManager.LayoutParams的type参数。<br>
	WindowManager所提供的功能很简单，常用的只有三个方法，即添加View，更新View和删除View，这三个方法定义在ViewManager中，而WindowManager继承了ViewManager。<br>
##8.2 Window的内部机制
	
##8.3 Window的创建过程
